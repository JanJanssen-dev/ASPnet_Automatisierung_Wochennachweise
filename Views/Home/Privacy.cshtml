@{
    ViewData["Title"] = "Datenschutzerklärung";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <h1 class="my-4 text-center">
                <i class="bi bi-shield-check text-primary me-2"></i>
                Datenschutzerklärung
            </h1>

            <div class="alert alert-info mb-4">
                <h5><i class="bi bi-info-circle me-2"></i>Überblick</h5>
                <p class="mb-2">
                    <strong>Diese Anwendung verarbeitet alle Daten ausschließlich lokal in Ihrem Browser.</strong>
                    Es werden keine personenbezogenen Daten an externe Server übertragen oder dauerhaft gespeichert.
                </p>
                <p class="mb-0">
                    <i class="bi bi-shield-check me-1"></i>
                    <strong>Client-seitige Verarbeitung bedeutet maximalen Datenschutz für Sie.</strong>
                </p>
            </div>

            <!-- ================================ -->
            <!-- 🔧 VERANTWORTLICHER -->
            <!-- ================================ -->
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-badge me-2"></i>1. Verantwortlicher
                    </h5>
                </div>
                <div class="card-body">
                    <p>Verantwortlicher im Sinne der DSGVO:</p>
                    <address>
                        <strong>Jan Sebastian Janssen</strong><br>
                        [Ihre Adresse]<br>
                        [PLZ Ort]<br>
                        E-Mail: [Ihre E-Mail]<br>
                        Telefon: [Ihre Telefonnummer]
                    </address>
                </div>
            </div>

            <!-- ================================ -->
            <!-- 🔧 DATENVERARBEITUNG -->
            <!-- ================================ -->
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-database me-2"></i>2. Art und Zweck der Datenverarbeitung
                    </h5>
                </div>
                <div class="card-body">

                    <h6><i class="bi bi-cpu me-2"></i>Client-seitige Verarbeitung</h6>
                    <p>
                        Alle von Ihnen eingegebenen Daten werden ausschließlich in Ihrem Browser verarbeitet:
                    </p>
                    <ul>
                        <li><strong>Personendaten:</strong> Vor- und Nachname, Klasse/Kurs</li>
                        <li><strong>Zeitraumdaten:</strong> Startdaten, Enddaten, Beschreibungen</li>
                        <li><strong>Konfigurationsdaten:</strong> Umschulungsbeginn, Zeiträume</li>
                    </ul>

                    <div class="alert alert-success">
                        <h6><i class="bi bi-shield-check me-2"></i>Wichtig</h6>
                        <p class="mb-0">
                            Wir bearbeiten Ihre datenschutzrechtlichen Anfragen innerhalb von 30 Tagen.
                            In komplexen Fällen kann sich diese Frist um weitere 60 Tage verlängern.
                        </p>
                    </div>
                </div>
            </div>

            <!-- ================================ -->
            <!-- 🔧 ZUSAMMENFASSUNG -->
            <!-- ================================ -->
            <div class="card mb-4 shadow-sm border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-check-circle me-2"></i>Zusammenfassung: Ihr Datenschutz
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 text-center mb-3">
                            <i class="bi bi-shield-check text-success" style="font-size: 3rem;"></i>
                            <h6 class="mt-2">Lokale Verarbeitung</h6>
                            <p class="small text-muted">
                                Alle Ihre Daten bleiben in Ihrem Browser
                            </p>
                        </div>
                        <div class="col-md-4 text-center mb-3">
                            <i class="bi bi-x-circle text-success" style="font-size: 3rem;"></i>
                            <h6 class="mt-2">Keine Übertragung</h6>
                            <p class="small text-muted">
                                Ihre Formulardaten werden nicht an Server gesendet
                            </p>
                        </div>
                        <div class="col-md-4 text-center mb-3">
                            <i class="bi bi-clock text-success" style="font-size: 3rem;"></i>
                            <h6 class="mt-2">Temporäre Speicherung</h6>
                            <p class="small text-muted">
                                Automatische Löschung beim Schließen des Browsers
                            </p>
                        </div>
                    </div>

                    <div class="text-center">
                        <a asp-action="Index" class="btn btn-primary">
                            <i class="bi bi-arrow-left me-1"></i>Zurück zum Generator
                        </a>
                        <a asp-action="Help" class="btn btn-outline-secondary ms-2">
                            <i class="bi bi-question-circle me-1"></i>Hilfe &amp; Anleitung
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔒 Datenschutz-Seite geladen');

            // Smooth scrolling für interne Links
            const scrollLinks = document.querySelectorAll('a[href^="#"]');
            scrollLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Externe Links in neuem Tab öffnen
            const externalLinks = document.querySelectorAll('a[href^="http"]:not([href*="' + window.location.hostname + '"])');
            externalLinks.forEach(link => {
                link.setAttribute('target', '_blank');
                link.setAttribute('rel', 'noopener noreferrer');
            });
        });
    </script>
}">
                            Diese Daten verlassen niemals Ihren Browser und werden nicht an unsere Server oder Dritte übertragen.
                            Die Generierung der Word-Dokumente erfolgt vollständig lokal auf Ihrem Gerät.
                        </p>
                    </div>

<h6 class="mt-4"><i class="bi bi-clock me-2"></i>Session-Speicherung</h6>
<p>
    Zur Verbesserung der Benutzerfreundlichkeit werden Ihre Eingaben temporär im Browser-Session-Speicher abgelegt:
</p>
<ul>
    <li><strong>Zweck:</strong> Erhaltung der Daten beim Navigieren zwischen Seiten</li>
    <li><strong>Speicherdauer:</strong> Bis zum Schließen des Browser-Tabs</li>
    <li><strong>Speicherort:</strong> Ausschließlich lokal in Ihrem Browser</li>
    <li><strong>Zugriff:</strong> Nur diese Anwendung, keine Drittanbieter</li>
</ul>
                </div>
            </div>

<!-- ================================ -->
<!-- 🔧 RECHTSGRUNDLAGEN -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-info text-white">
        <h5 class="mb-0">
            <i class="bi bi-scale me-2"></i>3. Rechtsgrundlagen
        </h5>
    </div>
    <div class="card-body">
        <p>Die Verarbeitung Ihrer Daten erfolgt auf Grundlage von:</p>

        <div class="row">
            <div class="col-md-6">
                <h6><i class="bi bi-check-circle me-2"></i>Art. 6 Abs. 1 lit. a DSGVO</h6>
                <p>
                    <strong>Einwilligung:</strong> Durch die aktive Nutzung der Anwendung und Eingabe Ihrer Daten
                    erteilen Sie Ihre Einwilligung zur lokalen Verarbeitung.
                </p>
            </div>
            <div class="col-md-6">
                <h6><i class="bi bi-check-circle me-2"></i>Art. 6 Abs. 1 lit. f DSGVO</h6>
                <p>
                    <strong>Berechtigtes Interesse:</strong> Bereitstellung einer funktionsfähigen Webanwendung
                    zur Generierung von Wochennachweisen.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 KEINE ÜBERTRAGUNG -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm border-success">
    <div class="card-header bg-success text-white">
        <h5 class="mb-0">
            <i class="bi bi-shield-check me-2"></i>4. Keine Datenübertragung
        </h5>
    </div>
    <div class="card-body">
        <div class="alert alert-success">
            <h6><i class="bi bi-globe me-2"></i>Keine Server-Übertragung</h6>
            <p class="mb-0">
                <strong>Ihre personenbezogenen Daten werden nicht an unsere Server übertragen.</strong>
                Alle Berechnungen und die Dokumentenerstellung erfolgen ausschließlich in Ihrem Browser.
            </p>
        </div>

        <h6><i class="bi bi-download me-2"></i>Template-Download</h6>
        <p>
            Lediglich die Word-Vorlage (Template) wird einmalig von unserem Server geladen.
            Diese Datei enthält keine personenbezogenen Daten, sondern nur die Dokumentstruktur.
        </p>

        <h6><i class="bi bi-x-circle me-2"></i>Keine Drittanbieter-Services</h6>
        <ul class="mb-0">
            <li>Keine Google Analytics oder ähnliche Tracking-Dienste</li>
            <li>Keine Social Media Plugins</li>
            <li>Keine Werbe-Netzwerke</li>
            <li>Keine Cloud-Services für Ihre Daten</li>
        </ul>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 TECHNISCHE DETAILS -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">
            <i class="bi bi-gear me-2"></i>5. Technische Umsetzung
        </h5>
    </div>
    <div class="card-body">

        <h6><i class="bi bi-braces me-2"></i>Verwendete Technologien</h6>
        <div class="row">
            <div class="col-md-6">
                <ul>
                    <li><strong>JavaScript:</strong> Lokale Datenverarbeitung</li>
                    <li><strong>Session Storage:</strong> Temporäre Datenhaltung</li>
                    <li><strong>Docxtemplater:</strong> Word-Dokumenterstellung</li>
                    <li><strong>JSZip:</strong> ZIP-Archiv-Erstellung</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul>
                    <li><strong>Bootstrap:</strong> Benutzeroberfläche</li>
                    <li><strong>ASP.NET Core:</strong> Web-Framework</li>
                    <li><strong>HTML5:</strong> Moderne Web-Standards</li>
                    <li><strong>CSS3:</strong> Responsive Design</li>
                </ul>
            </div>
        </div>

        <h6 class="mt-4"><i class="bi bi-server me-2"></i>Server-Logs</h6>
        <p>
            Unser Webserver protokolliert ausschließlich technische Zugriffsdaten:
        </p>
        <ul>
            <li>IP-Adresse (anonymisiert nach 24 Stunden)</li>
            <li>Browsertyp und -version</li>
            <li>Datum und Uhrzeit des Zugriffs</li>
            <li>Aufgerufene Seiten</li>
            <li>HTTP-Status-Codes</li>
        </ul>
        <p>
            <strong>Diese Logs enthalten keine Ihrer eingegebenen Formulardaten.</strong>
        </p>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 IHRE RECHTE -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-warning text-dark">
        <h5 class="mb-0">
            <i class="bi bi-person-check me-2"></i>6. Ihre Rechte nach DSGVO
        </h5>
    </div>
    <div class="card-body">
        <p>Sie haben folgende Rechte bezüglich Ihrer personenbezogenen Daten:</p>

        <div class="row">
            <div class="col-md-6">
                <h6><i class="bi bi-eye me-2"></i>Recht auf Auskunft (Art. 15)</h6>
                <p class="small">
                    Information über verarbeitete Daten und Verarbeitungszwecke
                </p>

                <h6><i class="bi bi-pencil me-2"></i>Recht auf Berichtigung (Art. 16)</h6>
                <p class="small">
                    Korrektur unrichtiger oder unvollständiger Daten
                </p>

                <h6><i class="bi bi-trash me-2"></i>Recht auf Löschung (Art. 17)</h6>
                <p class="small">
                    Löschung Ihrer Daten unter bestimmten Voraussetzungen
                </p>
            </div>
            <div class="col-md-6">
                <h6><i class="bi bi-pause me-2"></i>Recht auf Einschränkung (Art. 18)</h6>
                <p class="small">
                    Einschränkung der Verarbeitung unter bestimmten Umständen
                </p>

                <h6><i class="bi bi-download me-2"></i>Recht auf Übertragbarkeit (Art. 20)</h6>
                <p class="small">
                    Erhalt Ihrer Daten in einem strukturierten Format
                </p>

                <h6><i class="bi bi-x-circle me-2"></i>Widerspruchsrecht (Art. 21)</h6>
                <p class="small">
                    Widerspruch gegen die Verarbeitung Ihrer Daten
                </p>
            </div>
        </div>

        <div class="alert alert-info">
            <h6><i class="bi bi-info-circle me-2"></i>Besonderheit bei lokaler Verarbeitung</h6>
            <p class="mb-2">
                Da Ihre Daten ausschließlich lokal in Ihrem Browser verarbeitet werden, haben Sie jederzeit
                vollständige Kontrolle über Ihre Daten:
            </p>
            <ul class="mb-0">
                <li><strong>Löschen:</strong> Schließen des Browser-Tabs oder Löschen des Browser-Caches</li>
                <li><strong>Berichtigen:</strong> Direkte Änderung in den Eingabefeldern</li>
                <li><strong>Exportieren:</strong> Ihre Daten werden als Word-Dokumente heruntergeladen</li>
            </ul>
        </div>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 COOKIES -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-dark text-white">
        <h5 class="mb-0">
            <i class="bi bi-cookie me-2"></i>7. Cookies und lokale Speicherung
        </h5>
    </div>
    <div class="card-body">

        <h6><i class="bi bi-check-circle me-2"></i>Session-Cookies</h6>
        <p>
            Diese Anwendung verwendet ausschließlich technisch notwendige Session-Cookies:
        </p>
        <ul>
            <li><strong>Zweck:</strong> Aufrechterhaltung der Browser-Session</li>
            <li><strong>Inhalt:</strong> Session-ID (keine personenbezogenen Daten)</li>
            <li><strong>Laufzeit:</strong> Bis zum Schließen des Browsers</li>
            <li><strong>Typ:</strong> HttpOnly, Secure</li>
        </ul>

        <h6><i class="bi bi-database me-2"></i>Browser Session Storage</h6>
        <p>
            Ihre Formulareingaben werden temporär im Session Storage gespeichert:
        </p>
        <ul>
            <li><strong>Zweck:</strong> Erhaltung der Eingaben beim Seitenwechsel</li>
            <li><strong>Inhalt:</strong> Ihre Formulardaten (Name, Zeiträume, etc.)</li>
            <li><strong>Zugriff:</strong> Nur diese Anwendung</li>
            <li><strong>Laufzeit:</strong> Bis zum Schließen des Browser-Tabs</li>
        </ul>

        <div class="alert alert-success">
            <p class="mb-0">
                <i class="bi bi-shield-check me-1"></i>
                <strong>Wir verwenden keine Tracking-Cookies, Analytics-Cookies oder Werbe-Cookies.</strong>
            </p>
        </div>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 SICHERHEIT -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-danger text-white">
        <h5 class="mb-0">
            <i class="bi bi-shield me-2"></i>8. Datensicherheit
        </h5>
    </div>
    <div class="card-body">

        <h6><i class="bi bi-lock me-2"></i>Übertragungssicherheit</h6>
        <ul>
            <li><strong>HTTPS:</strong> Verschlüsselte Übertragung (TLS 1.2+)</li>
            <li><strong>HSTS:</strong> HTTP Strict Transport Security</li>
            <li><strong>CSP:</strong> Content Security Policy</li>
        </ul>

        <h6><i class="bi bi-cpu me-2"></i>Client-seitige Sicherheit</h6>
        <ul>
            <li><strong>Lokale Verarbeitung:</strong> Keine Datenübertragung an Server</li>
            <li><strong>Browser-Sandbox:</strong> Isolation von anderen Anwendungen</li>
            <li><strong>Moderne Browser-APIs:</strong> Sichere JavaScript-Funktionen</li>
            <li><strong>Same-Origin-Policy:</strong> Schutz vor Cross-Site-Angriffen</li>
        </ul>

        <h6><i class="bi bi-server me-2"></i>Server-seitige Sicherheit</h6>
        <ul>
            <li><strong>Minimale Datenerhebung:</strong> Nur technische Logs</li>
            <li><strong>Regelmäßige Updates:</strong> Aktuelle Sicherheitspatches</li>
            <li><strong>Firewall-Schutz:</strong> Abwehr von Angriffen</li>
            <li><strong>Backup-Strategie:</strong> Ausfallsicherheit</li>
        </ul>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 SPEICHERDAUER -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-info text-white">
        <h5 class="mb-0">
            <i class="bi bi-clock-history me-2"></i>9. Speicherdauer
        </h5>
    </div>
    <div class="card-body">

        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Datentyp</th>
                        <th>Speicherort</th>
                        <th>Speicherdauer</th>
                        <th>Löschung</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Formulardaten</strong><br><small>(Name, Zeiträume, etc.)</small></td>
                        <td>Browser Session Storage</td>
                        <td>Bis zum Schließen des Browser-Tabs</td>
                        <td>Automatisch</td>
                    </tr>
                    <tr>
                        <td><strong>Session-Cookie</strong><br><small>(Session-ID)</small></td>
                        <td>Browser Cookie Store</td>
                        <td>Bis zum Schließen des Browsers</td>
                        <td>Automatisch</td>
                    </tr>
                    <tr>
                        <td><strong>Server-Logs</strong><br><small>(IP, Zugriffe)</small></td>
                        <td>Webserver</td>
                        <td>30 Tage (IP anonymisiert nach 24h)</td>
                        <td>Automatisch</td>
                    </tr>
                    <tr>
                        <td><strong>Word-Dokumente</strong><br><small>(Ihre Downloads)</small></td>
                        <td>Ihr Gerät</td>
                        <td>Bis zur manuellen Löschung</td>
                        <td>Durch Sie</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="alert alert-info">
            <h6><i class="bi bi-info-circle me-2"></i>Manuelle Löschung</h6>
            <p class="mb-2">Sie können Ihre Daten jederzeit selbst löschen:</p>
            <ul class="mb-0">
                <li><strong>Session-Daten:</strong> Browser-Tab schließen oder Seite neu laden</li>
                <li><strong>Cookies:</strong> Browser-Einstellungen → Cookies löschen</li>
                <li><strong>Downloads:</strong> Dateien von Ihrem Computer löschen</li>
            </ul>
        </div>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 EXTERNE DIENSTE -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-warning text-dark">
        <h5 class="mb-0">
            <i class="bi bi-link me-2"></i>10. Externe Dienste und CDNs
        </h5>
    </div>
    <div class="card-body">

        <h6><i class="bi bi-bootstrap me-2"></i>Bootstrap Icons</h6>
        <p>
            Wir verwenden Bootstrap Icons von einem CDN (Content Delivery Network):
        </p>
        <ul>
            <li><strong>Anbieter:</strong> jsDelivr CDN</li>
            <li><strong>Zweck:</strong> Darstellung von Icons in der Benutzeroberfläche</li>
            <li><strong>Datenschutz:</strong> <a href="https://www.jsdelivr.com/privacy-policy-jsdelivr-net" target="_blank" rel="noopener">jsDelivr Privacy Policy</a></li>
            <li><strong>Übertragene Daten:</strong> IP-Adresse, Browser-Information</li>
        </ul>

        <h6><i class="bi bi-file-earmark-zip me-2"></i>JSZip Library</h6>
        <p>
            Für die ZIP-Erstellung nutzen wir die JSZip-Bibliothek:
        </p>
        <ul>
            <li><strong>Anbieter:</strong> Cloudflare CDN</li>
            <li><strong>Zweck:</strong> Erstellung von ZIP-Archiven</li>
            <li><strong>Verarbeitung:</strong> Ausschließlich lokal in Ihrem Browser</li>
            <li><strong>Keine Datenübertragung:</strong> Ihre Dokumente werden nicht an Dritte gesendet</li>
        </ul>

        <div class="alert alert-warning">
            <h6><i class="bi bi-exclamation-triangle me-2"></i>CDN-Zugriffe</h6>
            <p class="mb-0">
                Beim Laden der Seite werden JavaScript-Bibliotheken von externen CDNs geladen.
                Dabei wird Ihre IP-Adresse an diese Anbieter übertragen. Diese Übertragung ist
                technisch notwendig für die Funktionalität der Anwendung.
            </p>
        </div>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 ÄNDERUNGEN -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">
            <i class="bi bi-pencil-square me-2"></i>11. Änderungen der Datenschutzerklärung
        </h5>
    </div>
    <div class="card-body">
        <p>
            Wir behalten uns vor, diese Datenschutzerklärung zu aktualisieren, um sie an geänderte
            Rechtslagen oder Funktionalitäten anzupassen.
        </p>

        <ul>
            <li><strong>Benachrichtigung:</strong> Änderungen werden auf dieser Seite veröffentlicht</li>
            <li><strong>Inkrafttreten:</strong> Änderungen gelten ab Veröffentlichung</li>
            <li><strong>Archiv:</strong> Vorherige Versionen werden auf Anfrage zur Verfügung gestellt</li>
        </ul>

        <p class="mb-0">
            <strong>Stand dieser Datenschutzerklärung:</strong> @DateTime.Now.ToString("dd.MM.yyyy")
        </p>
    </div>
</div>

<!-- ================================ -->
<!-- 🔧 KONTAKT -->
<!-- ================================ -->
<div class="card mb-4 shadow-sm border-primary">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
            <i class="bi bi-envelope me-2"></i>12. Kontakt und Beschwerden
        </h5>
    </div>
    <div class="card-body">

        <div class="row">
            <div class="col-md-6">
                <h6><i class="bi bi-person-lines-fill me-2"></i>Datenschutz-Kontakt</h6>
                <p>
                    Bei Fragen zum Datenschutz oder zur Ausübung Ihrer Rechte wenden Sie sich an:
                </p>
                <address>
                    <strong>Jan Sebastian Janssen</strong><br>
                    E-Mail: [Ihre E-Mail]<br>
                    Telefon: [Ihre Telefonnummer]
                </address>
            </div>
            <div class="col-md-6">
                <h6><i class="bi bi-building me-2"></i>Aufsichtsbehörde</h6>
                <p>
                    Sie haben das Recht, sich bei einer Datenschutz-Aufsichtsbehörde zu beschweren:
                </p>
                <address>
                    <strong>[Zuständige Landesdatenschutzbehörde]</strong><br>
                    [Adresse der Behörde]<br>
                    [PLZ Ort]<br>
                    Website: [Website der Behörde]
                </address>
            </div>
        </div>

        <div class="alert alert-info">
            <h6><i class="bi bi-clock me-2"></i>Antwortzeiten</h6>
            <p class=" mb-0
